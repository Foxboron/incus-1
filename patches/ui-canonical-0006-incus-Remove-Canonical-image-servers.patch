From 04673f3740ea3b5019ff66647806f08f0f261ee3 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?St=C3=A9phane=20Graber?= <stgraber@stgraber.org>
Date: Wed, 22 Nov 2023 23:16:13 +0000
Subject: [PATCH 6/6] [incus] Remove Canonical image servers
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Signed-off-by: St√©phane Graber <stgraber@stgraber.org>
---
 src/pages/images/ImageSelector.tsx | 14 --------------
 1 file changed, 14 deletions(-)

diff --git a/src/pages/images/ImageSelector.tsx b/src/pages/images/ImageSelector.tsx
index 2d85c7e..a4694b4 100644
--- a/src/pages/images/ImageSelector.tsx
+++ b/src/pages/images/ImageSelector.tsx
@@ -81,25 +81,13 @@ const ImageSelector: FC<Props> = ({ onSelect, onClose }) => {
     },
   );
 
-  const { data: canonicalImages = [], isLoading: isCiLoading } = useQuery({
-    queryKey: [queryKeys.images, canonicalServer],
-    queryFn: () => loadImages(canonicalJson, canonicalServer),
-  });
-
-  const { data: minimalImages = [], isLoading: isMinimalLoading } = useQuery({
-    queryKey: [queryKeys.images, minimalServer],
-    queryFn: () => loadImages(minimalJson, minimalServer),
-  });
-
   const { data: localImages = [], isLoading: isLocalImageLoading } = useQuery({
     queryKey: [queryKeys.images, project],
     queryFn: () => fetchImageList(project ?? ""),
   });
 
   const isLoading =
-    isCiLoading ||
     isLciLoading ||
-    isMinimalLoading ||
     isLocalImageLoading ||
     isSettingsLoading;
   const archSupported = getArchitectureAliases(
@@ -109,8 +97,6 @@ const ImageSelector: FC<Props> = ({ onSelect, onClose }) => {
     ? []
     : localImages
         .map(localLxdToRemoteImage)
-        .concat([...minimalImages].reverse().sort(byLtsFirst))
-        .concat([...canonicalImages].reverse().sort(byLtsFirst))
         .concat(linuxContainerImages)
         .filter((image) => archSupported.includes(image.arch));
 
-- 
2.34.1

